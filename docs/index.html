<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ETH/USDT リアルタイム指標まとめ</title>
<style>
  body { font-family: "Segoe UI", sans-serif; background: #0a0a0a; color: #eee; text-align: center; padding: 40px; }
  h1 { color: #00ffff; }
  table { margin: 20px auto; border-collapse: collapse; width: 80%; max-width: 800px; background: #111; }
  th, td { border: 1px solid #333; padding: 8px 12px; }
  th { background: #222; color: #0ff; }
  tr:nth-child(even) { background: #1a1a1a; }
  .loading { color: #888; }
</style>
</head>
<body>
  <h1>ETH/USDT リアルタイム指標</h1>
  <p id="update" class="loading">読み込み中...</p>
  <div id="content"></div>

<script>
async function loadSummary() {
  const url = "./eth_summary.json";
  try {
    const res = await fetch(url + "?t=" + Date.now());
    if (!res.ok) throw new Error(res.status);
    const data = await res.json();
    const fc = data.forecast.map(f => 
      `<tr><td>${f.horizon}</td><td>${f.point}</td><td>${f.ci_low}</td><td>${f.ci_high}</td></tr>`).join("");
    document.getElementById("update").textContent = `最終更新: ${data.timestamp_jst}`;
    document.getElementById("content").innerHTML = `
      <table>
        <tr><th colspan="2">現在値</th></tr>
        <tr><td>価格</td><td>${data.price}</td></tr>
        <tr><td>RSI(14)</td><td>${data.rsi14}</td></tr>
        <tr><td>EMA(9/20/50)</td><td>${data.ema.ema9} / ${data.ema.ema20} / ${data.ema.ema50}</td></tr>
        <tr><td>MACD(12,26,9)</td><td>${data.macd.line} / Sig ${data.macd.signal} / Hist ${data.macd.hist}</td></tr>
        <tr><td>ATR(14)</td><td>${data.atr14}</td></tr>
      </table>
      <h2>短期予測（±1σレンジ）</h2>
      <table>
        <tr><th>期間</th><th>中央値</th><th>下限</th><th>上限</th></tr>
        ${fc}
      </table>
    `;
  } catch (err) {
    document.getElementById("content").innerHTML = `<p style="color:red;">データ読み込み失敗: ${err}</p>`;
  }
}
loadSummary();
</script>
</body>
</html>
